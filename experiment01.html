<!DOCTYPE html>
<html>
    <head>
    	<meta charset="utf-8">
    	<title>Canvas experiment</title>
    	<link href="canvas.css" rel="stylesheet" type="text/css">
    	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    	<script>

            var alpha = 1;
    		var canvas;
			var context;
            var timeout;
            
            function updateAlpha() {
                if(alpha >= 0.2) {
                    alpha -= 0.01;
                } else {
                    clearTimeout(timeout);
                }
                updateCanvas();
                timeout = setTimeout(updateAlpha, 10);
            }
			
            function updateCanvas() {
                canvas.attr("width", $(window).get(0).innerWidth);
    			canvas.attr("height", $(window).get(0).innerHeight);
                context.fillStyle = 'rgba(255,30,30,' + alpha + ')';
				context.fillRect(50, 50, 200, 200);
            }
            
    		$(document).ready(function() {
                canvas = $("#myCanvas"); //get canvas
                context = canvas.get(0).getContext("2d");
                $(window).resize(updateCanvas);
                
                updateAlpha();
    		});
    
    	</script>
    </head>
    <body>
    	<canvas id="myCanvas" width="500" height="500">
    		<p>Ihr Browser kann kein canvas. Schade.</p>
    	</canvas>
    </body>
</html>